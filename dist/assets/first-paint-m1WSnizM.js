var dt=Object.defineProperty;var lt=(e,t,n)=>t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var H=(e,t,n)=>(lt(e,typeof t!="symbol"?t+"":t,n),n),pt=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var S=(e,t,n)=>(pt(e,t,"read from private field"),n?n.call(e):t.get(e)),k=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};import{o as tt,T as ht,B as O}from"./index-iGRhHhaY.js";var h,E,et,b,R,nt=-1,m=function(e){addEventListener("pageshow",function(t){t.persisted&&(nt=t.timeStamp,e(t))},!0)},B=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},C=function(){var e=B();return e&&e.activationStart||0},f=function(e,t){var n=B(),r="navigate";return nt>=0?r="back-forward-cache":n&&(document.prerendering||C()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},g=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){t(i.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},d=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=a,t.rating=function(c,u){return c>u[1]?"poor":c>u[0]?"needs-improvement":"good"}(t.value,n),e(t))}},D=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},w=function(e){var t=function(n){n.type!=="pagehide"&&document.visibilityState!=="hidden"||e(n)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},V=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},v=-1,Y=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},A=function(e){document.visibilityState==="hidden"&&v>-1&&(v=e.type==="visibilitychange"?e.timeStamp:0,mt())},q=function(){addEventListener("visibilitychange",A,!0),addEventListener("prerenderingchange",A,!0)},mt=function(){removeEventListener("visibilitychange",A,!0),removeEventListener("prerenderingchange",A,!0)},U=function(){return v<0&&(v=Y(),q(),m(function(){setTimeout(function(){v=Y(),q()},0)})),{get firstHiddenTime(){return v}}},I=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},G=[1800,3e3],it=function(e,t){t=t||{},I(function(){var n,r=U(),i=f("FCP"),a=g("paint",function(o){o.forEach(function(c){c.name==="first-contentful-paint"&&(a.disconnect(),c.startTime<r.firstHiddenTime&&(i.value=Math.max(c.startTime-C(),0),i.entries.push(c),n(!0)))})});a&&(n=d(e,i,G,t.reportAllChanges),m(function(o){i=f("FCP"),n=d(e,i,G,t.reportAllChanges),D(function(){i.value=performance.now()-o.timeStamp,n(!0)})}))})},j=[.1,.25],Lt=function(e,t){t=t||{},it(V(function(){var n,r=f("CLS",0),i=0,a=[],o=function(u){u.forEach(function(s){if(!s.hadRecentInput){var p=a[0],P=a[a.length-1];i&&s.startTime-P.startTime<1e3&&s.startTime-p.startTime<5e3?(i+=s.value,a.push(s)):(i=s.value,a=[s])}}),i>r.value&&(r.value=i,r.entries=a,n())},c=g("layout-shift",o);c&&(n=d(e,r,j,t.reportAllChanges),w(function(){o(c.takeRecords()),n(!0)}),m(function(){i=0,r=f("CLS",0),n=d(e,r,j,t.reportAllChanges),D(function(){return n()})}),setTimeout(n,0))}))},y={passive:!0,capture:!0},vt=new Date,K=function(e,t){h||(h=t,E=e,et=new Date,at(removeEventListener),rt())},rt=function(){if(E>=0&&E<et-vt){var e={entryType:"first-input",name:h.type,target:h.target,cancelable:h.cancelable,startTime:h.timeStamp,processingStart:h.timeStamp+E};b.forEach(function(t){t(e)}),b=[]}},Tt=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,r){var i=function(){K(n,r),o()},a=function(){o()},o=function(){removeEventListener("pointerup",i,y),removeEventListener("pointercancel",a,y)};addEventListener("pointerup",i,y),addEventListener("pointercancel",a,y)}(t,e):K(t,e)}},at=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Tt,y)})},X=[100,300],bt=function(e,t){t=t||{},I(function(){var n,r=U(),i=f("FID"),a=function(u){u.startTime<r.firstHiddenTime&&(i.value=u.processingStart-u.startTime,i.entries.push(u),n(!0))},o=function(u){u.forEach(a)},c=g("first-input",o);n=d(e,i,X,t.reportAllChanges),c&&w(V(function(){o(c.takeRecords()),c.disconnect()})),c&&m(function(){var u;i=f("FID"),n=d(e,i,X,t.reportAllChanges),b=[],E=-1,h=null,at(addEventListener),u=a,b.push(u),rt()})})},ot=0,_=1/0,L=0,gt=function(e){e.forEach(function(t){t.interactionId&&(_=Math.min(_,t.interactionId),L=Math.max(L,t.interactionId),ot=L?(L-_)/7+1:0)})},ut=function(){return R?ot:performance.interactionCount||0},yt=function(){"interactionCount"in performance||R||(R=g("event",gt,{type:"event",buffered:!0,durationThreshold:0}))},z=[200,500],ct=0,J=function(){return ut()-ct},l=[],N={},Q=function(e){var t=l[l.length-1],n=N[e.interactionId];if(n||l.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};N[r.id]=r,l.push(r)}l.sort(function(i,a){return a.latency-i.latency}),l.splice(10).forEach(function(i){delete N[i.id]})}},At=function(e,t){t=t||{},I(function(){var n;yt();var r,i=f("INP"),a=function(c){c.forEach(function(p){p.interactionId&&Q(p),p.entryType==="first-input"&&!l.some(function(P){return P.entries.some(function(x){return p.duration===x.duration&&p.startTime===x.startTime})})&&Q(p)});var u,s=(u=Math.min(l.length-1,Math.floor(J()/50)),l[u]);s&&s.latency!==i.value&&(i.value=s.latency,i.entries=s.entries,r())},o=g("event",a,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});r=d(e,i,z,t.reportAllChanges),o&&("interactionId"in PerformanceEventTiming.prototype&&o.observe({type:"first-input",buffered:!0}),w(function(){a(o.takeRecords()),i.value<0&&J()>0&&(i.value=0,i.entries=[]),r(!0)}),m(function(){l=[],ct=ut(),i=f("INP"),r=d(e,i,z,t.reportAllChanges)}))})},W=[2500,4e3],F={},Ct=function(e,t){t=t||{},I(function(){var n,r=U(),i=f("LCP"),a=function(u){var s=u[u.length-1];s&&s.startTime<r.firstHiddenTime&&(i.value=Math.max(s.startTime-C(),0),i.entries=[s],n())},o=g("largest-contentful-paint",a);if(o){n=d(e,i,W,t.reportAllChanges);var c=V(function(){F[i.id]||(a(o.takeRecords()),o.disconnect(),F[i.id]=!0,n(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return setTimeout(c,0)},!0)}),w(c),m(function(u){i=f("LCP"),n=d(e,i,W,t.reportAllChanges),D(function(){i.value=performance.now()-u.timeStamp,F[i.id]=!0,n(!0)})})}})},Z=[800,1800],Et=function e(t){document.prerendering?I(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},wt=function(e,t){t=t||{};var n=f("TTFB"),r=d(e,n,Z,t.reportAllChanges);Et(function(){var i=B();if(i){var a=i.responseStart;if(a<=0||a>performance.now())return;n.value=Math.max(a-C(),0),n.entries=[i],r(!0),m(function(){n=f("TTFB",0),(r=d(e,n,Z,t.reportAllChanges))(!0)})}})};const st={FIRST_PAINT:"fp",FIRST_CONTENTFUL_PAINT:"fcp",FIRST_INPUT_DELAY:"fi",LARGEST_CONTENTFUL_PAINT:"lcp",CUMULATIVE_LAYOUT_SHIFT:"cls",INTERACTION_TO_NEXT_PAINT:"inp",LONG_TASK:"lt",TIME_TO_FIRST_BYTE:"ttfb"};var T;class ft{constructor(t,n){k(this,T,new Set);H(this,"history",[]);this.name=t,this.attrs={},this.roundingMethod=typeof n=="function"?n:Math.floor}update(t){let{value:n,entries:r=[],attrs:i={}}=t;if(n<0)return;const a={value:this.roundingMethod(n),name:this.name,entries:r,attrs:i};this.history.push(a),S(this,T).forEach(o=>{try{o(this.current)}catch{}})}get current(){return this.history[this.history.length-1]||{value:void 0,name:this.name,entries:[],attrs:{}}}get isValid(){return this.current.value>=0}subscribe(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof t=="function")return S(this,T).add(t),this.isValid&&n&&this.history.forEach(r=>{t(r)}),()=>{S(this,T).delete(t)}}}T=new WeakMap;const M=new ft(st.FIRST_CONTENTFUL_PAINT);if(tt)if(ht)try{if(!O){const e=performance.getEntriesByType("paint");e.forEach(t=>{t.name==="first-contentful-paint"&&M.update({value:Math.floor(t.startTime),entries:e})})}}catch{}else it(e=>{let{value:t,entries:n}=e;O||M.isValid||M.update({value:t,entries:n})});const $=new ft(st.FIRST_PAINT);if(tt){const e=n=>{n.forEach(r=>{r.name==="first-paint"&&!$.isValid&&(t.disconnect(),$.update({value:r.startTime,entries:n}))})};let t;try{PerformanceObserver.supportedEntryTypes.includes("paint")&&!O&&(t=new PerformanceObserver(n=>{Promise.resolve().then(()=>{e(n.getEntries())})}),t.observe({type:"paint",buffered:!0}))}catch{}}export{At as Q,Lt as S,ft as V,Ct as W,wt as Z,M as a,st as b,$ as f,bt as x};
